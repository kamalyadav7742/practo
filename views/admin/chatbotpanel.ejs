<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Pannel</title>
    <!-- Bootstrap CSS Sidebar -->
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/CDN/bootstrap5.min.css">
    <link rel="stylesheet" href="/static/vendor/fontawesome-free/css/all.css">
    <link rel="stylesheet" href="/static/CDN/fontawesome.css">
    <script src="/static/CDN/jquery.js"></script>
    <script src="/static/CDN/bootstrap5.2.3bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>

   

    <!-- <script defer src="../routes/route2.js"></script> -->
    <script src="/static/CDN/socket.js"></script>
</head>
<style>
  .btn-check:focus+.btn,
  .btn:focus {
    outline: 0;
    box-shadow: 0 0 0 0 rgba(255, 241, 241, 0.25);
  }

  .dropdown {
    text-align: justify;
    padding-left: 30px;


  }

  #buttons {
    text-align: end;
    padding-left: 10px;

  }

  .card {
    border-radius: 10px;
    box-shadow: 0px 0px 5px skyblue;
  }

  @media only screen and (max-width: 1100px) {
    .col-md-4 {
      padding-top: 10px;
    }
  }


  #blue {
    background-color: rgba(85, 215, 255, 0.097);
    border-top: 2px solid rgb(12, 36, 251);
  }

  #orange {
    border-top: 2px solid rgb(255, 94, 0);
    background-color: rgba(255, 166, 0, 0.173);
  }

  #green {
    border-top: 2px solid green;
    background-color: rgba(144, 238, 144, 0.415);
  }

  .col-lg-6 {
    padding-top: 10px;
  }

  .last {
    padding: 0px;
    box-shadow: 0px 0px 4px rgb(72, 71, 71);
    border-radius: 10px;
    box-shadow: none;
  }

  .end {
    padding-top: 0px;
  }



  hr:not([size]) {
    height: 0px;
  }



  #myChart {


    height: 300px !important;
    padding: 20px !important;

  }


  .svg {
    display: flex;
    justify-content: center;
    align-items: center;

  }


  .circle {
    height: 50%;
    width: 50%;
    border: 6px solid gray;
    border-radius: 50%;
    text-align: center;
    padding-top: 65px;
    margin-top: 30px;
  }

  @media only screen and(max-width:1000px) {
    .circle {
      width: 0px;
      height: 0px;
    }
  }

  @media only screen and (max-width: 988px) and (min-width: 500px) {
    .circle {
      width: 24%;
      height: 65%;
      border-radius: 50%;
    }
  }

  /* .hour {
  margin-top: 10px;
} */

  @media only screen and (max-width:768px) {
    .hour {
      margin-top: 120px;
    }
  }
  
</style>
<body>
  
<%- include('../partials/main_navbar.ejs') %>
<%- include('../partials/main_sidebar.ejs') %>

  <!-- section 1 start -->
  <main class="container-fluid" id="main_container" style="margin-top: 80px; margin-left: 80px; margin-bottom: 20px; margin-right: 20px; width: 92%; height: 100%; ">
    <div class="container-fluid mt-5">

      <div class="row py-1" style="border:1px solid rgb(249, 249, 251)">
        <div class="col-md-6 col-lg-6 col-xl-6 " col-xl-6 id="dropdown">

          <h4> Dashboard</h4>

        </div>
        <div class=" col-md-6 col-lg-6 col-xl-6" id="buttons">
          <button class="btn btn-outline-dark" style="padding: 0px; width: 34px; height: 36px;"><i
              class="fa-solid fa-ellipsis"></i></button>

          <button class="btn btn-outline-dark" style="padding: 0px; width: 34px; height: 36px;"><b>i</b></button>

        </div>
      </div>


    </div>

    <div class="container-fluid">
      <div class="row py-3" style="box-shadow: 0px 0px 5px rgb(214, 214, 214); background-color: aliceblue;">


        <div class="col-xl-2 col-lg-3 col-md-4">
          <div class="card" style="height: 4.5rem;">
            <div class="card-body">
              <h6 class="card-title" style="font-size: 15px;">Page Views  </h6>
              <h6 class="card-subtitle mb-2 text-muted">1</h6>
              <h6  class="card-text" id="count">
                
              </h6>

            </div>
          </div>
        </div>




        <div class="col-xl-2 col-lg-3 col-md-4">
          <div class="card" style=" height: 4.5rem;">
            <div class="card-body">
              <h6 class="card-title" style="font-size: 15px;">User Login</h6>
              <h6 class="card-subtitle mb-2 text-muted" id="online"></h6>
            </div>
          </div>
        </div>




        <div class="col-xl-2 col-lg-3 col-md-4">
          <div class="card" style="height: 4.5rem;">
            <div class="card-body">
              <h6 class="card-title" style="font-size: 15px;">User Signup</h6>
              <h6 class="card-subtitle mb-2 text-muted"></h6>
              <h6 class="card-text" style="color:red">1</h6>

            </div>
          </div>
        </div>



        <div class="col-lg-3 col-md-4 col-xl-2">
          <div class="card" style="height: 4.5rem;">
            <div class="card-body">
              <h6 class="card-title" style="font-size: 15px;">Online</h6>
              <h6 class="card-subtitle mb-2 text-muted" id="online"</h6>


            </div>
          </div>
        </div>



        <div class="col-lg-3 col-md-4 col-xl-2">
          <div class="card" style="height: 4.5rem;">
            <div class="card-body">
              <h6 class="card-title" style="font-size: 15px;">Logout</h6>
              <h6 class="card-subtitle mb-2 text-muted"></h6>
              <h6 class="card-text">1</h6>

            </div>
          </div>
        </div>
        
        <div class="col-lg-3 col-md-4 col-xl-2">
          <div class="card" style="height: 4.5rem;">
            <div class="card-body">
              <h6 class="card-title" style="font-size: 15px;">Unassigned  </h6>
              <h6 class="card-subtitle mb-2 text-muted"></h6>
              <h6 class="card-text">1</h6>

            </div>
          </div>
        </div>


        <div class="col-lg-11"
          style="background-color: rgb(255, 255, 255); margin-top: 30px; box-shadow: 0px 0px 2px rgb(185, 183, 183); height: 50px; line-height: 4px;width: 98%;margin-left: 11px;">
          <h5 style="font-size: 17px;padding-top: 14px;">Signup Database Data </h5>
        </div>
       
          <div class="container-fluid chart ">

            <div class="row">
              <div class="col-md-12">

     
            <!-- <canvas id="myChart" style="width:100%;height: 300px;"></canvas> -->
             <canvas id="myChart1" style="width:100%;height: 300px; border: 1px solid grey;"></canvas>
            </div>
          </div>
          </div>



        </div>

        <!-- <div class="row" style="background-color: white; width: 98%; margin-left: 10px; box-shadow: 0px 0px 2px gray; padding: 20px; "> -->
       <div class="container-fluid">
       
          <div class="row justify-content-evenly"  style="box-shadow: 0px 0px 2px gray;">
            <div class="col-md-5">
              <p  style="box-shadow: 0px 0px 2px gray; text-align: center;" class="mt-4">Product</p>
              <canvas id="myChart2" style="width: 100%; height: 100%;"></canvas>


            </div>
            <div class="col-md-5"  style="border-left: 1px solid gray;">
              <p  style="box-shadow: 0px 0px 2px gray; text-align: center;" class="mt-4">Contact Us</p>
              <canvas id="myChart3"></canvas>

            </div>
           
        </div>
       </div>

            </div>
          </div>
        </div>
      </div>

    </div>

    </div>
 </main>




 <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 <script>
  fetch('/signin')
    .then(res => res.json())
    .then(data => {
      const ctx = document.getElementById('myChart1').getContext('2d');
      const chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: data.map(d => d.id),
          datasets: [{
            label: 'Signin',
            data: data.map(d => d.id),
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgba(255, 99, 132, 1)',
            borderWidth: 1,
          }]
        },
        
        options: {
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: true
              }
            }]
          }
        }
      });
    });
</script>
<script>
  fetch('/message')
    .then(res => res.json())
    .then(data => {
      const ctx = document.getElementById('myChart3').getContext('2d');
      const chart = new Chart(ctx, {
        type: 'pie',
        data: {
          labels: data.map(d => d.id),
          datasets: [{
            label: 'Value',
            data: data.map(d => d.id),
            
            startAngle: 240,
		yValueFormatString: "##0.00\"%\"",
		indexLabel: "{label} {y}",
		dataPoints: [
			{y: 79.45, label: "Google"},
			{y: 7.31, label: "Bing"},
			{y: 7.06, label: "Baidu"},
			{y: 4.91, label: "Yahoo"},
			{y: 1.26, label: "Others"}
		]
          }]
        },
        options: {
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: true
              }
            }]
          }
        }
      });
    });
</script>

<script>
  fetch('/product')
    .then(res => res.json())
    .then(data => {
      const ctx = document.getElementById('myChart2').getContext('2d');
      const chart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: data.map(d => d.id),
          datasets: [{
            label: 'Value',
            data: data.map(d => d.id),
            backgroundColor: ['#4CAF50', '#FFC107', '#9C27B0', '#03A9F4', '#F44336'], // Add a color scheme
            hoverBackgroundColor: ['#8BC34A', '#FFEB3B', '#BA68C8', '#4FC3F7', '#EF5350'], // Add a hover color scheme
            borderColor: 'rgba(0, 0, 0, 0.2)',
            borderWidth: 1,
            barPercentage: 0.8, // Adjust the width of the bars
            categoryPercentage: 0.5, // Adjust the spacing between the bars
          }]
        },
        options: {
          title: {
            display: true,
            text: 'Search Engine Market Share' // Add a title
          },
          legend: {
            display: false // Remove the legend
          },
          scales: {
            yAxes: [{
              ticks: {
                beginAtZero: true,
                callback: function(value, index, values) {
                  return value + '%'; // Add a percentage sign to the y-axis values
                }
              },
              scaleLabel: {
                display: true,
                labelString: 'Percentage' // Add a label to the y-axis
              }
            }],
            xAxes: [{
              gridLines: {
                display: false // Remove the x-axis grid lines
              },
              ticks: {
                fontColor: '#333' // Adjust the color of the x-axis labels
              }
            }]
          },
          animation: {
            duration: 2000, // Add animation
            easing: 'easeInOutQuart'
          },
          tooltips: {
            callbacks: {
              label: function(tooltipItem, data) {
                return data.datasets[0].data[tooltipItem.index] + '%'; // Add a percentage sign to the tooltips
              }
            }
          }
        }
      });
    });
</script>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
  setInterval(function() {
    $("#myDiv").load(location.href + " #myDiv");
  }, 3000); // refresh every 3 seconds
});
</script>


<script>
  const socket = io('/user-namespace');
  const onlineCount = document.getElementById('online');

  socket.on('connect', function() {
    console.log('connected');
  });

  socket.on('disconnect', function() {
    console.log('disconnected');
  });

  socket.on('count-update', function(count) {
    onlineCount.innerText = count1;
  });
</script>



   <script>
      setInterval(() => {
          window.location.href="/admin"
      }, 600000);
   </script>

<!-- refersh page -->


 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


  </body>

  </html>